<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Daum에디터 - 파일 첨부</title>
<link rel="stylesheet" href="../../css/popup.css" type="text/css"  charset="utf-8"/>
<link href="../../css/swfupload.css" rel="stylesheet" type="text/css" />
<script src="../../js/popup.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" src="../../js/swfupload.js"></script>
<script type="text/javascript" src="../../js/swfupload.queue.js"></script>
<script type="text/javascript" src="../../js/fileprogress.js"></script>
<script type="text/javascript" src="../../js/handlers.js"></script>
</head>
<script type="text/javascript">
<!--
  var upload1;

  window.onload = function() {
      upload1 = new SWFUpload({
          // Backend Settings
          upload_url: "file_upload.asp",
          post_params: {
              "sessionid" : sessionid,
              "uploadpath" : uploadpath
          },

          // File Upload Settings
          file_size_limit : "409600", // 10MB
          file_types : "*.*",
          file_types_description : "All files",
          file_upload_limit : "10",
          file_queue_limit : "0",

          // Event Handler Settings
          file_dialog_start_handler : fileDialogStart,
          file_queued_handler : fileQueued,
          file_queue_error_handler : fileQueueError,
          file_dialog_complete_handler : fileDialogComplete,
          upload_start_handler : uploadStart,
          upload_progress_handler : uploadProgress,
          upload_error_handler : uploadError,
          upload_success_handler : uploadSuccess,
          upload_complete_handler : uploadComplete,

          // Button Settings
          button_image_url : "../../images/seek.png",
          button_placeholder_id : "spanButtonPlaceholder1",
          button_width: 68,
          button_height: 27,

          // Flash Settings
          flash_url : "../../swf/swfupload.swf",

          // Custom Settings
          custom_settings : {
              progressTarget : "fsUploadProgress1",
              uploadButtonId : "btnUpload",
              file_type      : "attach",
              uploadDir      : uploadpath,
              download_url   : editorpath + "/pages/trex/file_download.asp"
          },

          // Debug Settings
          debug: false
      });
  }
//-->
</script>
<body>

<div class="wrapper">
  <div class="header">
    <h1>파일 첨부 <span style='font-weight:normal;'>(멀티업로드)</span></h1>
  </div>
  <div class="body" style='height:371px;overflow:auto;'>
    <dl class="alert">
      <dt>파일 첨부 확인&nbsp;<span style='font-weight:normal;'>(최대 : 40M, 2개)</span></dt>
      <dd>
        찾아보기로 파일 찾으시면 바로 업로를 시작 합니다.<br>
        여러개 파일을 한번에 찾아 업로드가 가능합니다.
      </dd>
    </dl>

    <form name=form method=post>
    <table width="350" border="0" cellpadding="0" cellspacing="0" align="center">
      <tr>
        <td>
          <div class="fieldset flash" id="fsUploadProgress1" style="width:350px;"><span class="legend">업로드 파일 목록</span></div>
          <div style="padding-top:15px; padding-left:5px; text-align:center;">
            <span id="spanButtonPlaceholder1"></span>
            <!--input id="btnCancel1" type="button" value="Cancel Uploads" onclick="cancelQueue(upload1);" disabled="disabled" style="margin-left: 2px; height: 22px; font-size: 8pt;" /-->
          </div>
        </td>
      </tr>
    </table>
    </form>
    </dl>
  </div>

  <div class="footer">
    <p><a href="#" onclick="closeWindow();" title="닫기" class="close">닫기</a></p>
    <!--ul>
      <li class="submit"><a href="#" onclick="done();" title="등록" class="btnlink">등록</a> </li>
      <li class="cancel"><a href="#" onclick="closeWindow();" title="취소" class="btnlink">취소</a></li>
    </ul-->
  </div>
</div>

<script type="text/javascript">
// <![CDATA[
  var _opener;
  var _mockdata = new Array();
  var editorpath = "";
  var uploadpath = "";
  var sessionid = "";

  function done() {
    if (typeof(execAttach) == 'undefined') { //Virtual Function
          return;
      }

    for (var i=0; i<_mockdata.length; i++){
        execAttach(_mockdata[i]);
    }

    closeWindow();
  }

  function initUploader(){
    var _opener = PopupUtil.getOpener();
    if (!_opener) {
      alert('잘못된 경로로 접근하셨습니다.');
      return;
    }

    var _attacher = getAttacher('file', _opener);
    registerAction(_attacher);

    if (opener) {
      editorpath = _opener.editorpath;
      uploadpath = _opener.uploadpath;
      if(_opener.$tx('sessionid') != null) sessionid = _opener.$tx('sessionid').value;
    }
  }

  initUploader();

</script>

</body>
</html>
